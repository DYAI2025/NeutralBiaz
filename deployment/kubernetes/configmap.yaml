apiVersion: v1
kind: ConfigMap
metadata:
  name: biazneutralize-config
  namespace: biazneutralize
  labels:
    app.kubernetes.io/name: biazneutralize
    app.kubernetes.io/component: config
data:
  # Application configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  LOG_LEVEL: "info"
  ENVIRONMENT: "production"
  
  # Database configuration
  POSTGRES_DB: "biazneutralize"
  POSTGRES_USER: "postgres"
  
  # Redis configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  
  # Model configuration
  MODEL_CACHE_DIR: "/app/models"
  
  # CORS configuration
  CORS_ORIGINS: "https://biazneutralize.example.com"
  
  # Celery configuration
  CELERY_BROKER_URL: "redis://redis-service:6379"
  CELERY_RESULT_BACKEND: "redis://redis-service:6379"
  
  # Monitoring
  PROMETHEUS_PORT: "9090"
  METRICS_ENABLED: "true"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: biazneutralize
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
data:
  POSTGRES_DB: "biazneutralize"
  POSTGRES_USER: "postgres"
  PGDATA: "/var/lib/postgresql/data/pgdata"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-config
  namespace: biazneutralize
  labels:
    app.kubernetes.io/name: redis
    app.kubernetes.io/component: cache
data:
  redis.conf: |
    # Redis configuration for production
    bind 0.0.0.0
    port 6379
    protected-mode yes
    requirepass redis_password_from_secret
    
    # Memory management
    maxmemory 256mb
    maxmemory-policy allkeys-lru
    
    # Persistence
    save 900 1
    save 300 10
    save 60 10000
    
    # Logging
    loglevel notice
    logfile ""
    
    # Security
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
    rename-command DEBUG ""
    
    # Performance
    tcp-keepalive 60
    timeout 0