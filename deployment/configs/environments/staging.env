# Staging Environment Configuration for BiazNeutralize AI

# Application Settings
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=debug
API_HOST=0.0.0.0
API_PORT=8000

# Security Settings
SECRET_KEY=${SECRET_KEY}
CORS_ORIGINS=https://staging.biazneutralize.example.com,https://api-staging.biazneutralize.example.com
ALLOWED_HOSTS=staging.biazneutralize.example.com,api-staging.biazneutralize.example.com
TRUST_PROXY=true

# Database Configuration
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${RDS_ENDPOINT}:5432/${POSTGRES_DB}
DATABASE_POOL_SIZE=10
DATABASE_POOL_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_ECHO=false

# Redis Configuration
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_ENDPOINT}:6379
REDIS_POOL_SIZE=5
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache Settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=1800
CACHE_KEY_PREFIX=biazneutralize:staging:

# Celery Configuration
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@${REDIS_ENDPOINT}:6379/0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@${REDIS_ENDPOINT}:6379/1
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_WORKER_CONCURRENCY=2

# Model Configuration
MODEL_CACHE_DIR=/app/models
MODEL_CACHE_SIZE=2GB
ENABLE_MODEL_CACHING=true
MODEL_LOAD_TIMEOUT=300

# AI/ML Settings
SPACY_MODEL=en_core_web_sm
TRANSFORMERS_CACHE=/app/models/transformers
TORCH_CACHE=/app/models/torch
ENABLE_GPU=false
BATCH_SIZE=16
MAX_SEQUENCE_LENGTH=512

# File Storage
STORAGE_TYPE=s3
AWS_STORAGE_BUCKET_NAME=${S3_BUCKET_NAME}
AWS_S3_REGION_NAME=${AWS_REGION}
AWS_S3_USE_SSL=true
AWS_S3_FILE_OVERWRITE=false

# Monitoring and Logging
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_RELEASE=${BUILD_VERSION}
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp

# Performance Settings
WORKERS=2
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=500
MAX_REQUESTS=500
MAX_REQUESTS_JITTER=50
TIMEOUT=30
KEEPALIVE=2

# Security Headers
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=3600
SECURE_HSTS_INCLUDE_SUBDOMAINS=false
SECURE_HSTS_PRELOAD=false
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_FRAME_DENY=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE_URL=redis://:${REDIS_PASSWORD}@${REDIS_ENDPOINT}:6379/2
RATE_LIMIT_DEFAULT=500 per hour
RATE_LIMIT_API=50 per minute

# Email Configuration
MAIL_SERVER=${SMTP_SERVER}
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=${SMTP_USERNAME}
MAIL_PASSWORD=${SMTP_PASSWORD}
MAIL_DEFAULT_SENDER=staging-noreply@biazneutralize.example.com

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DETAILED_PATH=/health/detailed

# Frontend Environment
REACT_APP_API_URL=https://api-staging.biazneutralize.example.com
REACT_APP_ENVIRONMENT=staging
REACT_APP_SENTRY_DSN=${FRONTEND_SENTRY_DSN}
REACT_APP_ANALYTICS_ID=${STAGING_ANALYTICS_ID}
REACT_APP_FEATURE_FLAGS=${STAGING_FEATURE_FLAGS}

# Testing and Development
ENABLE_TEST_DATA=true
TEST_USER_EMAIL=test@biazneutralize.example.com
ALLOW_ADMIN_ACCESS=true
DEBUG_TOOLBAR=false

# Resource Limits
MEMORY_LIMIT=1GB
CPU_LIMIT=500m
DISK_SPACE_LIMIT=5GB
CONCURRENT_REQUESTS=500

# Kubernetes Integration
KUBERNETES_NAMESPACE=biazneutralize-staging
KUBERNETES_SERVICE_ACCOUNT=biazneutralize-app
KUBERNETES_CLUSTER_NAME=${EKS_CLUSTER_NAME}

# Observability
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.5
METRICS_NAMESPACE=biazneutralize/staging
LOG_FORMAT=json
LOG_DESTINATION=stdout